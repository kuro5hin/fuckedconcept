function randomInt(e){return Math.floor(Math.random()*e)}function getURLParameter(e){var t=decodeURI((RegExp(e+"="+"(.+?)(&|$)").exec(location.search)||[,null])[1]);if(t=="null"){t=false}else{t=decodeURIComponent((t+"").replace(/\+/g," "))}return t}function autoplay(){if(p){clearInterval(p);$("#play").html("▶");p=false;loops=0}else{$("#play").html("❚❚");$("#reload").click();p=setInterval(function(){if(loops>99){autoplay()}else{loops++;$("#reload").click()}},8e3)}}function place_word(e){e=e.replace(/\<.*?\>/g,"");e=e.replace(/\./g,"");$(document).attr("title",e+" is a Fucked Concept");e=e.replace(/ /g,"<br />");$("#spinner").hide();$("#concept span a").css({color:"#fff",opacity:"0.5"});$("#concept span a").html(e);var t=window.location.protocol+"//"+window.location.hostname+window.location.pathname+"?g="+current_gif_id+"&w="+current_post_id;$("#link a").attr("href",t);window.history.pushState("page","Title",t);$("body").display()}function gif_me(e,t){var n=gif_url+"random"+gif_token;if(e){n=gif_url+e+gif_token}$.ajax({url:n,dataType:"text",success:function(n){gif=$.parseJSON(n);if(e){$("#background").css("background-image","url("+gif.data.images.original.url+")")}else{$("#background").css("background-image","url("+gif.data.image_original_url+")")}current_gif_id=gif.data.id;word(t)}})}function word(e){if(e){getPost(place_word,1,e)}else{var t=current_post;while(t==current_post){t=randomInt(post_count)}current_post=t;getPost(place_word,t)}}function getPost(e,t,n){if(!t){t=0}var r="&limit=1&offset="+t;if(n){r="&id="+n}$.ajax({url:api_url+"posts"+api_token+r,dataType:"jsonp",success:function(t){current_post_id=t.response.posts[0].id;body=t.response.posts[0].body.replace(/\<.*?\>/g,"");body=body.replace(/\./g,"");return e(body)}})}var api_token="?api_key=[YOUR TUMBLR TOKEN]&callback=?";var api_url=window.location.protocol+"//api.tumblr.com/v2/blog/fuckedconcept.tumblr.com/";var gif_token="?api_key=dc6zaTOxFJmzC&callback=?";var gif_url=window.location.protocol+"//api.giphy.com/v1/gifs/";var post_count;var current_post;var current_post_id;var current_gif_id;var p;var loops=0;(function(e){e.fn.display=function(){var t=12;e("#word").css({"font-size":t+"px"});var n=e("body").width();var r=e("#word").width();var i=n/r*t;e("#word").css({"font-size":parseInt(i)+"px"});e("#word").css({"line-height":"0.9em"});e("#concept").height(e("#word").height()*.85);e("#word").children("a").css({color:"#000",opacity:"1"})}})(jQuery);$(document).ready(function(){$.ajaxSetup({cache:false});$(window).resize(function(){$("body").display()});$("#reload").click(function(){if($("#instructions").is(":visible")){clearTimeout(t);$("#instructions").fadeOut("normal")}$("#concept span a").css({color:"#eee",opacity:"0.7"});$("#spinner").show();gif_me();return false});$("#play").click(function(){autoplay();return false});t=setTimeout(function(){$("#instructions").fadeOut("normal")},1e4);var e=api_url+"info"+api_token;$.ajax({url:e,dataType:"jsonp",success:function(e){post_count=e.response.blog.posts;var t=getURLParameter("g");var n=getURLParameter("w");if(t&&n){gif_me(t,n)}else{gif_me()}}})})